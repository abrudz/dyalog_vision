# [Dyalog APL](https://www.dyalog.com/) Vision

This is [my](https://apl.wiki/Ad√°m_Brudzewsky) vision for a realistic development of core Dyalog APL, including extending the domains of existing primitives/quad-names, and adding a few new ones. Requires Dyalog APL version 18.2 or higher.

### How to use

You can easily play with these almost like you use normal Dyalog APL in a session:

#### Initialisation

Install one or both of the [APL386 Unicode](https://abrudz.github.io/APL386/) or [SAX2](https://abrudz.github.io/SAX2/) fonts to display `‚´Ω` and `‚ëä` correctly.

From within Dyalog APL 18.2 or higher:

* If using the Windows IDE, choose *APL385 Unicode* or *SAX2* as session font. 

* Enter `]get path/dyalog_vision`

#### Running code

You have three options:

1. Use the extensions directly with the glyph names, e.g. `4 1 dyalog_vision.RightShoeUnderbar ‚éïA`.
2. Use `dyalog_vision.‚àÜFIX` as a drop in for `‚éïFIX`.
3. Use `dyalog_vision.‚çôRepl #` to start a (limited) session where the glyphs work. Enter `‚Üí` to exit.

### Content

All scalar functions support [leading axis agreement](https://aplwiki.com/wiki/Leading_axis_agreement). In addition, the following is included:

| Name                                        | Symbol    | Type* | Extension                                                                                                                                                                                                                             | Examples                                                                                                       |
| ------------------------------------------- |:---------:|:-----:| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------- |
| [CircleDiaeresis](CircleDiaeresis.aplo)     | `‚ç•`       | üîµ    | Depth when right operand is array. This is similar to Rank (`‚ç§`) but applies at nesting level.                                                                                                                                        | `f‚ç•0` applies `f` like a scalar function and `f‚ç•1` applies to flat subarrays. `f‚ç§1‚ç•1` applies to flat vectors. |
| [DelDiaeresis](DelDiaeresis.aplo)           | `‚ç¢`       | üî∫    | Under (a.k.a. Dual). Like `f‚ç•g`¬†but conceptually inverts the right operand when done. If `g`¬†is a selection function, it puts the data back where it came from                                                                        | `-‚ç¢(2 3‚àò‚äÉ)`¬†negates the 2nd element's 3rd element.                                                             |
| [DelTilde](DelTilde.aplo)                   | `‚ç´`       | üî∫    | Obverse; `‚ç∫‚ç∫` but with inverse `‚çµ‚çµ`                                                                                                                                                                                                   | `√ó‚ç¢(FFT‚ç´iFFT)`                                                                                                 |
| [DollarSign](DollarSign.aplf)               | `$`       | üî∫    | string enhancement <code>${1}</code>:`1‚äÉ‚ç∫`, <code>${expr}</code>:`‚çéexpr`, `\n`:JSON                                                                                                                                                   | `'Dyer' 'Bob'$'Hi, ${2} ${1}!`<br/>`$'Hi, ${first} ${last}!`<br/>`$'2√ó3=${2√ó3}'`                               |
| [DoubleBackslash](DoubleBackslash.aplf)     | `‚ëä`       | üî∫    | Always-a-function`‚çÄ`¬†which allows short and/or multiple left args                                                                                                                                                                     | `1 0 1(‚ä£‚ëä‚´Ω)'ABC'`¬†gives `A C`                                                                                  |
| [DoubleSlash](DoubleSlash.aplf)             | `‚´Ω`       | üî∫    | Always-a-function¬†`‚åø`¬† which allows short and/or multiple left args                                                                                                                                                                   | `‚äÉ‚´Ω/‚éïVFI`                                                                                                      |
| [DownArrow](DownArrow.aplf)                 | `‚Üì`       | üîµ    | dyad allows long `‚ç∫`                                                                                                                                                                                                                  | `0 1‚Üì'abc'`¬†gives `1 2‚ç¥'bc'`                                                                                   |
| [DownShoe](DownShoe.aplf)                   | `‚à™`       | üîµ    | dyad allows rank>1                                                                                                                                                                                                                    | `(‚ç™'ab')‚à™‚ç™'ad'`                                                                                                |
| [DownTack](DownTack.aplf)                   | `‚ä§`       | ‚ö†     | `‚ä•‚ç£¬Ø1`¬†when left argument is scalar                                                                                                                                                                                                   | `2‚ä§123`¬†gives `1 1 1 1 0 1 1`                                                                                  |
| [EpsilonUnderbar](EpsilonUnderbar.aplf)     | `‚ç∑`       | üî∂    | monad: Type (like¬†`‚àä` with `‚éïML‚Üê0`)                                                                                                                                                                                                   | `‚ç∑1'a'#`¬†gives `0' '#`'                                                                                        |
| [GreaterThan](GreaterThan.aplf)             | `>`       | üî∂    | monad: demote (`,[‚ç≥2]`)                                                                                                                                                                                                               | `>2 3 4‚ç¥‚éïA`¬†gives `6 4‚ç¥‚éïA`                                                                                     |
| [JotUnderbar](JotUnderbar.aplo)             | `‚çõ`       | üî∫    | reverse composition `X f‚çõg Y` is `(f X) g Y`¬†and default argument                                                                                                                                                                     | `‚åΩ‚çõ‚â°`¬†checks for palindromes.<br/>`a-‚çõ‚Üëb`¬†takes the last `a`¬†from `b`.                                         |
| [LeftShoe](LeftShoe.aplf)                   | `‚äÇ`       | üîµ    | dyad allows partitioning along multiple leading axes                                                                                                                                                                                  | `(‚äÇ1 1)‚äÇmatrix`¬†separates out the first row and column.                                                        |
| [LeftShoeUnderbar](LeftShoeUnderbar.aplf)   | `‚äÜ`       | üîµ    | dyad allows partitioning along multiple leading axes                                                                                                                                                                                  | `(‚äÇ1 0 1 1)‚äÜ4 4‚ç¥‚éïA`¬†splits off the first row and column, and removes the second.                               |
| [LessThan](LessThan.aplf)                   | `<`       | üî∂    | monad: promote (`‚çµ‚ç¥‚ç®1,‚ç¥‚çµ`)                                                                                                                                                                                                            | `'ABC'‚ç™‚ç•<'DEF'`¬†gives `2 3‚ç¥‚éïA`                                                                                 |
| [QuadDiamond](QuadDiamond.aplo)             | `‚å∫`       | üî∂    | auto-extended `‚çµ‚çµ`, allows small `‚çµ`, optional edge spec(s) ([0:Zero; 1:Repl; 2:Rev; 3:Mirror; 4:Wrap](http://web.science.mq.edu.au/~len/preprint/hamey-dicta2015-functional-border.pdf#page=3); -:Twist) with masks as operand's `‚ç∫` | Life on a cylinder:¬†`0 4 Life‚å∫3 3`                                                                             |
| [Rho](Rho.aplf)¬†(ETA Aug. ‚Äô22)              | `‚ç¥`       | üîµ    | dyad: negatives reverse axis, `0.5`¬†auto-size rounding down, `1.5`¬†auto-size rounding up                                                                                                                                              | Reshape into two columns: `0.5 2‚ç¥data`                                                                         |
| [RightShoeUnderbar](RightShoeUnderbar.aplf) | `‚äá`       | üî∫    | monad: last (`‚äÉ‚åΩ,‚çµ`)<br/>dyad: select (`‚å∑‚ç®‚àò‚äÉ‚ç®‚ç§0 99`)                                                                                                                                                                                  | `3 1 2‚äá'abc'`¬†gives `'cab'`                                                                                    |
| [Root](Root.dyalog)                         | `‚àö`       | üî∫    | (Square) Root                                                                                                                                                                                                                         | `‚àö25`¬†gives `5`<br/>`3‚àö27 gives 3`                                                                             |
| [Tilde](Tilde.aplf)                         | `~`       | üîµ    | dyad allows rank>1                                                                                                                                                                                                                    | `(‚ç™'abc')~,'a'`¬†gives `‚ç™'bc'`                                                                                  |
| [UpArrow](UpArrow.aplf)                     | `‚Üë`       | üîµ    | allows long `‚ç∫`                                                                                                                                                                                                                       | `2 3‚Üë4 5`¬†gives `2 3‚ç¥4 5 0 0 0 0`                                                                              |
| [UpShoe](UpShoe.aplf)                       | `‚à©`       | üîµ    | dyadic allows rank>1                                                                                                                                                                                                                  | `(‚ç™'abc')‚à™‚ç™'dc'`¬†gives `‚ç™c`                                                                                    |
| [Vel](Vel.aplf)                             | `‚à®`       | üî∂    | monadic is Descending Sort                                                                                                                                                                                                            | `‚àß'car'`¬†gives `'rca'`                                                                                         |
| [Wedge](Wedge.aplf)                         | `‚àß`       | üî∂    | monadic is Ascending Sort                                                                                                                                                                                                             | `‚àß'car'` gives `'acr'`                                                                                         |
| [‚àÜC](‚àÜC.aplf)                               | `‚éïC`      | üîµ    | scalar, and left argument 0 is no-op                                                                                                                                                                                                  | `¬Ø1 0 0 0 1‚éïC'APLer'`¬†gives `'aPLeR'`                                                                          |
| [‚àÜEM](‚àÜEM.aplf)                             | `‚éïEM`     | üîµ    | Self-inverse `‚éïEM`                                                                                                                                                                                                                    | `‚éïEM'RANK ERROR' 'WS FULL'`¬†gives `4 1`                                                                        |
| [‚àÜNS](‚àÜNS.aplf)                             | `‚éïNS`     | üîµ    | Accepts ref left arg. Name Set: The list of values to copy into the new/target namespace can have 2-element name-value vectors, setting the name to the given value                                                                   | `ref‚Üê‚éïNS('Abe' 10)('Bea' 12)`<br/>`ref‚éïNS‚äÇ'Carl' 8`                                                            |
| [‚àÜNG](‚àÜNG.aplf)                             | `‚éïNG`     | üî∫    | Name Get                                                                                                                                                                                                                              | `ref‚éïNG'Bea' 'Abe'`                                                                                            |
| [‚àÜSIGNAL](‚àÜsignal.aplf)                     | `‚éïSIGNAL` | üîµ    | Allows `‚éïDMX`-style ref argument                                                                                                                                                                                                      | `‚éïSIGNAL ‚éïDMX`                                                                                                 |
| [‚àÜUCS](‚àÜUCS.aplf)                           | `‚éïUCS`    | üîµ    | scalar when monadic                                                                                                                                                                                                                   | `‚éïUCS'A'99`                                                                                                    |

\*‚ÄÉüî∫ new feature‚ÄÉüî∂ added valence‚ÄÉüîµ expanded domain‚ÄÉ‚ö† breaking change
