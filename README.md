# [Dyalog APL](https://www.dyalog.com/) Vision

This is [my](https://apl.wiki/AdÃ¡m_Brudzewsky) vision for a realistic development of core Dyalog APL, including extending the domains of existing primitives/quad-names, and adding a few new ones. Requires Dyalog APL version 18.2 or higher.

### How to use

You can easily play with these almost like you use normal Dyalog APL in a session:

#### Initialisation

Install one or both of the [APL386 Unicode](https://abrudz.github.io/APL386/) or [SAX2](https://abrudz.github.io/SAX2/) fonts to display `â«½` and `â‘Š` correctly.

From within Dyalog APL 18.2 or higher:

* If using the Windows IDE, choose *APL385 Unicode* or *SAX2* as session font. 

* Enter `]get path/dyalog_vision`

#### Running code

You have three options:

1. Use the extensions directly with the glyph names, e.g. `4 1 dyalog_vision.RightShoeUnderbar â•A`.
2. Use `dyalog_vision.âˆ†FIX` as a drop in for `â•FIX`.
3. Use `dyalog_vision.â™Repl #` to start a (limited) session where the glyphs work. Enter `â†’` to exit.

### Content

All scalar functions support [leading axis agreement](https://aplwiki.com/wiki/Leading_axis_agreement). In addition, the following is included:

| Name                                        | Symbol    | Type* | Extension                                                                                                                                                                                                                             | Examples                                                                                                       |
| ------------------------------------------- |:---------:|:-----:| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------- |
| [CircleDiaeresis](CircleDiaeresis.aplo)     | `â¥`       | ğŸ”µ    | Depth when right operand is array. This is similar to Rank (`â¤`) but applies at nesting level.                                                                                                                                        | `fâ¥0` applies `f` like a scalar function and `fâ¥1` applies to flat subarrays. `fâ¤1â¥1` applies to flat vectors. |
| [DelDiaeresis](DelDiaeresis.aplo)           | `â¢`       | ğŸ”º    | Under (a.k.a. Dual). Like `fâ¥g`Â but conceptually inverts the right operand when done. If `g`Â is a selection function, it puts the data back where it came from                                                                        | `-â¢(2 3âˆ˜âŠƒ)`Â negates the 2nd element's 3rd element.                                                             |
| [DelTilde](DelTilde.aplo)                   | `â«`       | ğŸ”º    | Obverse; `âºâº` but with inverse `âµâµ`                                                                                                                                                                                                   | `Ã—â¢(FFTâ«iFFT)`                                                                                                 |
| [DollarSign](DollarSign.aplf)               | `$`       | ğŸ”º    | string enhancement <code>${1}</code>:`1âŠƒâº`, <code>${expr}</code>:`âexpr`, `\n`:JSON                                                                                                                                                   | `'Dyer' 'Bob'$'Hi, ${2} ${1}!`<br/>`$'Hi, ${first} ${last}!`<br/>`$'2Ã—3=${2Ã—3}'`                               |
| [DoubleBackslash](DoubleBackslash.aplf)     | `â‘Š`       | ğŸ”º    | Always-a-function`â€`Â which allows short and/or multiple left args                                                                                                                                                                     | `1 0 1(âŠ£â‘Šâ«½)'ABC'`Â gives `A C`                                                                                  |
| [DoubleSlash](DoubleSlash.aplf)             | `â«½`       | ğŸ”º    | Always-a-functionÂ `âŒ¿`Â  which allows short and/or multiple left args                                                                                                                                                                   | `âŠƒâ«½/â•VFI`                                                                                                      |
| [DownArrow](DownArrow.aplf)                 | `â†“`       | ğŸ”µ    | dyad allows long `âº`                                                                                                                                                                                                                  | `0 1â†“'abc'`Â gives `1 2â´'bc'`                                                                                   |
| [DownShoe](DownShoe.aplf)                   | `âˆª`       | ğŸ”µ    | dyad allows rank>1                                                                                                                                                                                                                    | `(âª'ab')âˆªâª'ad'`                                                                                                |
| [DownTack](DownTack.aplf)                   | `âŠ¤`       | âš      | `âŠ¥â£Â¯1`Â when left argument is scalar                                                                                                                                                                                                   | `2âŠ¤123`Â gives `1 1 1 1 0 1 1`                                                                                  |
| [EpsilonUnderbar](EpsilonUnderbar.aplf)     | `â·`       | ğŸ”¶    | monad: Type (likeÂ `âˆŠ` with `â•MLâ†0`)                                                                                                                                                                                                   | `â·1'a'#`Â gives `0' '#`'                                                                                        |
| [GreaterThan](GreaterThan.aplf)             | `>`       | ğŸ”¶    | monad: demote (`,[â³2]`)                                                                                                                                                                                                               | `>2 3 4â´â•A`Â gives `6 4â´â•A`                                                                                     |
| [JotUnderbar](JotUnderbar.aplo)             | `â›`       | ğŸ”º    | reverse composition `X fâ›g Y` is `(f X) g Y`Â and default argument                                                                                                                                                                     | `âŒ½â›â‰¡`Â checks for palindromes.<br/>`a-â›â†‘b`Â takes the last `a`Â from `b`.                                         |
| [LeftShoe](LeftShoe.aplf)                   | `âŠ‚`       | ğŸ”µ    | dyad allows partitioning along multiple leading axes                                                                                                                                                                                  | `(âŠ‚1 1)âŠ‚matrix`Â separates out the first row and column.                                                        |
| [LeftShoeUnderbar](LeftShoeUnderbar.aplf)   | `âŠ†`       | ğŸ”µ    | dyad allows partitioning along multiple leading axes                                                                                                                                                                                  | `(âŠ‚1 0 1 1)âŠ†4 4â´â•A`Â splits off the first row and column, and removes the second.                               |
| [LessThan](LessThan.aplf)                   | `<`       | ğŸ”¶    | monad: promote (`âµâ´â¨1,â´âµ`)                                                                                                                                                                                                            | `'ABC'âªâ¥<'DEF'`Â gives `2 3â´â•A`                                                                                 |
| [QuadDiamond](QuadDiamond.aplo)             | `âŒº`       | ğŸ”¶    | auto-extended `âµâµ`, allows small `âµ`, optional edge spec(s) ([0:Zero; 1:Repl; 2:Rev; 3:Mirror; 4:Wrap](http://web.science.mq.edu.au/~len/preprint/hamey-dicta2015-functional-border.pdf#page=3); -:Twist) with masks as operand's `âº` | Life on a cylinder:Â `0 4 LifeâŒº3 3`                                                                             |
| [Rho](Rho.aplf)Â (ETA Aug. â€™22)              | `â´`       | ğŸ”µ    | dyad: negatives reverse axis, `0.5`Â auto-size rounding down, `1.5`Â auto-size rounding up                                                                                                                                              | Reshape into two columns: `0.5 2â´data`                                                                         |
| [RightShoeUnderbar](RightShoeUnderbar.aplf) | `âŠ‡`       | ğŸ”º    | monad: last (`âŠƒâŒ½,âµ`)<br/>dyad: select (`âŒ·â¨âˆ˜âŠƒâ¨â¤0 99`)                                                                                                                                                                                  | `3 1 2âŠ‡'abc'`Â gives `'cab'`                                                                                    |
| [Root](Root.dyalog)                         | `âˆš`       | ğŸ”º    | (Square) Root                                                                                                                                                                                                                         | `âˆš25`Â gives `5`<br/>`3âˆš27 gives 3`                                                                             |
| [Tilde](Tilde.aplf)                         | `~`       | ğŸ”µ    | dyad allows rank>1                                                                                                                                                                                                                    | `(âª'abc')~,'a'`Â gives `âª'bc'`                                                                                  |
| [UpArrow](UpArrow.aplf)                     | `â†‘`       | ğŸ”µ    | allows long `âº`                                                                                                                                                                                                                       | `2 3â†‘4 5`Â gives `2 3â´4 5 0 0 0 0`                                                                              |
| [UpShoe](UpShoe.aplf)                       | `âˆ©`       | ğŸ”µ    | dyadic allows rank>1                                                                                                                                                                                                                  | `(âª'abc')âˆªâª'dc'`Â gives `âªc`                                                                                    |
| [Vel](Vel.aplf)                             | `âˆ¨`       | ğŸ”¶    | monadic is Descending Sort                                                                                                                                                                                                            | `âˆ§'car'`Â gives `'rca'`                                                                                         |
| [Wedge](Wedge.aplf)                         | `âˆ§`       | ğŸ”¶    | monadic is Ascending Sort                                                                                                                                                                                                             | `âˆ§'car'` gives `'acr'`                                                                                         |
| [âˆ†C](âˆ†C.aplf)                               | `â•C`      | ğŸ”µ    | scalar, and left argument 0 is no-op                                                                                                                                                                                                  | `Â¯1 0 0 0 1â•C'APLer'`Â gives `'aPLeR'`                                                                          |
| [âˆ†EM](âˆ†EM.aplf)                             | `â•EM`     | ğŸ”µ    | Self-inverse `â•EM`                                                                                                                                                                                                                    | `â•EM'RANK ERROR' 'WS FULL'`Â gives `4 1`                                                                        |
| [âˆ†NS](âˆ†NS.aplf)                             | `â•NS`     | ğŸ”µ    | Accepts ref left arg. Name Set: The list of values to copy into the new/target namespace can have 2-element name-value vectors, setting the name to the given value                                                                   | `refâ†â•NS('Abe' 10)('Bea' 12)`<br/>`refâ•NSâŠ‚'Carl' 8`                                                            |
| [âˆ†NG](âˆ†NG.aplf)                             | `â•NG`     | ğŸ”º    | Name Get                                                                                                                                                                                                                              | `refâ•NG'Bea' 'Abe'`                                                                                            |
| [âˆ†SIGNAL](âˆ†signal.aplf)                     | `â•SIGNAL` | ğŸ”µ    | Allows `â•DMX`-style ref argument                                                                                                                                                                                                      | `â•SIGNAL â•DMX`                                                                                                 |
| [âˆ†UCS](âˆ†UCS.aplf)                           | `â•UCS`    | ğŸ”µ    | scalar when monadic                                                                                                                                                                                                                   | `â•UCS'A'99`                                                                                                    |

\*â€ƒğŸ”º new featureâ€ƒğŸ”¶ added valenceâ€ƒğŸ”µ expanded domainâ€ƒâš  breaking change
