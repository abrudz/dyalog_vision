# [Dyalog APL](https://www.dyalog.com/) Vision

This is [my](https://apl.wiki/Ad√°m_Brudzewsky) vision for a realistic development of core Dyalog APL, including extending the domains of existing primitives/quad-names, and adding a few new ones. Requires and extends Dyalog APL version 18.2. If Dyalog APL moves forward in ways that are incompatible with what is found here, the vision will be updated accordingly. This project should therefore not be relied on as stable.

### How to use

You can easily play with these almost like you use normal Dyalog APL in a session:

#### Initialisation

From within Dyalog APL 18.2 or higher, enter `]get path/dyalog_vision` or to import directly from GitHub `]get https://github.com/abrudz/dyalog_vision`

#### Running code

You have three options:

1. Use the extensions directly with the glyph names, e.g. `4 1 dyalog_vision.RightShoeUnderbar ‚éïA`.
2. Use `dyalog_vision.‚àÜFIX` as a drop in for `‚éïFIX`.
3. Use `dyalog_vision.‚çôREPL #` to start a (limited) session where the glyphs work. Enter `‚Üí` to exit.

### Content

* All scalar functions support [leading axis agreement](https://aplwiki.com/wiki/Leading_axis_agreement).

* All set functions support arguments of any rank.

* `‚éïC` and monadic `‚éïUCS` are scalar functions.

* In addition, the following is included:

| Name                                        | Symbol    | Type* | Extension                                                                                                                                                                                                                             | Examples                                                                                                       |
| ------------------------------------------- |:---------:|:-----:| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------- |
| <span id="CircleDiaeresis">[CircleDiaeresis](CircleDiaeresis.aplo)</span>     | `‚ç•`       | üîµ  | ‚úÖ Depth when right operand is array. This is similar to Rank (`‚ç§`) but applies at nesting level.                                                                                                                                        | `f‚ç•0` applies `f` like a scalar function and `f‚ç•1` applies to flat subarrays. `f‚ç§1‚ç•1` applies to flat vectors. |
| <span id="DelDiaeresis">[DelDiaeresis](DelDiaeresis.aplo)</span>           | `‚ç¢`       | üî∫    | Under (a.k.a. Dual). Like `f‚ç•g`¬†but conceptually inverts the right operand when done. If `g`¬†is a selection function, it puts the data back where it came from                                                                        | `-‚ç¢(2 3‚àò‚äÉ)`¬†negates the 2nd element's 3rd element.                                                             |
| <span id="DelTilde">[DelTilde](DelTilde.aplo)</span>                   | `‚ç´`       | üî∫    | Obverse; `‚ç∫‚ç∫` but with inverse `‚çµ‚çµ`                                                                                                                                                                                                   | `√ó‚ç¢(FFT‚ç´iFFT)`                                                                                                 |
| <span id="DollarSign">[DollarSign](DollarSign.aplf)</span>               | `$`       | üî∫    | string enhancement <code>${1}</code>:`1‚äÉ‚ç∫`, <code>${expr}</code>:`‚çéexpr`, `\n`:JSON                                                                                                                                                   | `'Dyer' 'Bob'$'Hi, ${2} ${1}!`<br/>`$'Hi, ${first} ${last}!`<br/>`$'2√ó3=${2√ó3}'`                               |
| <span id="DownArrow">[DownArrow](DownArrow.aplf)</span>                 | `‚Üì`       | üîµ    | dyad allows long `‚ç∫`                                                                                                                                                                                                                  | `0 1‚Üì'abc'`¬†gives `1 2‚ç¥'bc'`                                                                                   |
| <span id="DownTack">[DownTack](DownTack.aplf)</span>                   | `‚ä§`       | ‚ö†     | `‚ä•‚ç£¬Ø1`¬†when left argument is scalar                                                                                                                                                                                                   | `2‚ä§123`¬†gives `1 1 1 1 0 1 1`                                                                                  |
| <span id="EpsilonUnderbar">[EpsilonUnderbar](EpsilonUnderbar.aplf)</span>     | `‚ç∑`       | üî∂    | monad: Type (like¬†`‚àä` with `‚éïML‚Üê0`)                                                                                                                                                                                                   | `‚ç∑1'a'#`¬†gives `0' '#`'                                                                                        |
| <span id="Equal">[Equal](Equal.aplf)</span>                         | `=`       | üî∂    | monad: Rank (`‚â¢‚ç¥`)                                                                                                                                                                                                                     | `=10 20 30`¬†gives `1`'                                                                                        |
| <span id="GreaterOrEqual">[GreaterOrEqual](GreaterOrEqual.aplf)</span>       | `‚â•`       | üîµ    | monad: sort descending                                                                                                                                                                                                                 | `‚â•3 1 4 1 5` gives `5 4 3 1 1`                                                                                |
| <span id="GreaterThan">[GreaterThan](GreaterThan.aplf)</span>             | `>`       | üîµ    | monad: Join                                                                                                                                                                                                                           | `>2 2‚ç¥‚ç™¬®1 2 3 4` gives `2 2‚ç¥1 2 3 4`                                                                           |
| <span id="JotUnderbar">[JotUnderbar](JotUnderbar.aplo)</span>             | `‚çõ`       | üî∫  | ‚úÖ reverse composition `X f‚çõg Y` is `(f X) g Y`¬†and default argument                                                                                                                                                                     | `‚åΩ‚çõ‚â°`¬†checks for palindromes.<br/>`a-‚çõ‚Üëb`¬†takes the last `a`¬†from `b`.                                         |
| <span id="LeftShoe">[LeftShoe](LeftShoe.aplf)</span>                   | `‚äÇ`       | üîµ    | dyad allows partitioning along multiple leading axes                                                                                                                                                                                  | `(‚äÇ1 1)‚äÇmatrix`¬†separates out the first row and column.                                                        |
| <span id="LeftShoeUnderbar">[LeftShoeUnderbar](LeftShoeUnderbar.aplf)</span>   | `‚äÜ`       | üîµ    | dyad allows partitioning along multiple leading axes                                                                                                                                                                                  | `(‚äÇ1 0 1 1)‚äÜ4 4‚ç¥‚éïA`¬†splits off the first row and column, and removes the second.                               |
| <span id="LessOrEqual">[LessOrEqual](LessOrEqual.aplf)</span>             | `‚â§`       | üîµ    | monad: sort ascending                                                                                                                                                                                                                  | `‚â§3 1 4 1 5` gives `1 1 3 4 5`                                                                                 |
| <span id="LessThan">[LessThan](LessOrEqual.aplf)</span>                | `<`       | üîµ    | monad: Major Cells                                                                                                                                                                                                                    | `<2 2 2‚ç¥‚éïA` gives `(2 2‚ç¥'ABCD')(2 2‚ç¥'EFGH')`                                                                   |
| <span id="QuadEqual">[QuadEqual](QuadEqual.aplo)</span>                 | `‚å∏`       | üîµ    | allow array operand to be vocabulary (then uses `{‚äÇ‚çµ}` as internal operand)                                                                                                                                                           | `‚â¢¬®'ACGT'‚å∏'ATT-ACA'` gives `3 1 0 2`                                                                           |
| <span id="QuadDiamond">[QuadDiamond](QuadDiamond.aplo)</span>             | `‚å∫`       | üî∂    | auto-extended `‚çµ‚çµ`, allows small `‚çµ`, optional edge spec(s) ([0:Zero; 1:Repl; 2:Rev; 3:Mirror; 4:Wrap](http://web.science.mq.edu.au/~len/preprint/hamey-dicta2015-functional-border.pdf#page=3); -:Twist) with masks as operand's `‚ç∫` | Life on a cylinder:¬†`0 4 Life‚å∫3 3`                                                                             |
| <span id="QuestionMark">[QuestionMark](QuestionMark.aplf)</span>           | `?`       | üîµ    | dyadic allows `‚ç∫` to be any shape (not just vector shape) and `‚çµ` is shape of array to select indices from                                                                                                                             | `3 5?4 13` deals 3 hands of 5 cards from deck of 4 suits from A to K                                            |
| <span id="Rho">[Rho](Rho.aplf)</span>                             | `‚ç¥`       | üîµ    | dyad: negatives reverse axis, `0.5`¬†auto-size rounding down, `1.5`¬†auto-size rounding up, `2.5`¬†auto-size with padding                                                                                                       | Reshape into two columns: `0.5 2‚ç¥data`                                                                         |
| <span id="RightShoeUnderbar">[RightShoeUnderbar](RightShoeUnderbar.aplf)</span> | `‚äá`       | üî∫  | monad: last (`‚äÉ‚åΩ,‚çµ`)<br/>‚úÖ dyad: select (`‚å∑‚ç®‚àò‚äÉ‚ç®‚ç§0 99`)                                                                                                                                                                                  | `3 1 2‚äá'abc'`¬†gives `'cab'`                                                                                    |
| <span id="Root">[Root](Root.dyalog)</span>                         | `‚àö`       | üî∫    | (Square) Root                                                                                                                                                                                                                         | `‚àö25`¬†gives `5`<br/>`3‚àö27 gives 3`                                                                             |
| <span id="UpArrow">[UpArrow](UpArrow.aplf)</span>                     | `‚Üë`       | üîµ    | allows long `‚ç∫`                                                                                                                                                                                                                       | `2 3‚Üë4 5`¬†gives `2 3‚ç¥4 5 0 0 0 0`                                                                              |
| <span id="Vel">[Vel](Vel.aplf)</span>                             | `‚à®`       | üî∂    | monad: demote (`,[‚ç≥2]`)                                                                                                                                                                                                               | `‚à®2 3 4‚ç¥‚éïA` gives `6 4‚ç¥‚éïA`                                                                                     |
| <span id="Wedge">[Wedge](Wedge.aplf)</span>                         | `‚àß`       | üî∂    | monad: promote (`‚çµ‚ç¥‚ç®1,‚ç¥‚çµ`)                                                                                                                                                                                                            | `'ABC'‚ç™‚ç•‚àß'DEF'` gives `2 3‚ç¥‚éïA`                                                                                 |
| <span id="‚àÜEM">[‚àÜEM](‚àÜEM.aplf)</span>                             | `‚éïEM`     | üîµ    | Self-inverse `‚éïEM`                                                                                                                                                                                                                    | `‚éïEM'RANK ERROR' 'WS FULL'`¬†gives `4 1`                                                                        |
| <span id="‚àÜNG">[‚àÜNG](‚àÜNG.aplf)</span>                             | `‚éïNG`     | üî∫    | Name Get                                                                                                                                                                                                                              | `ref‚éïNG'Bea' 'Abe'`                                                                                            |
| <span id="‚àÜNS">[‚àÜNS](‚àÜNS.aplf)</span>                             | `‚éïNS`     | üîµ    | Accepts ref left arg. Name Set: The list of values to copy into the new/target namespace can have 2-element name-value vectors, setting the name to the given value                                                                   | `ref‚Üê‚éïNS('Abe' 10)('Bea' 12)`<br/>`ref‚éïNS‚äÇ'Carl' 8`                                                            |
| <span id="‚àÜNV">[‚àÜNV](‚àÜNV.aplf)</span>                             | `‚éïNV`     | üî∫    | Names and Values                                                                                                                                                                                                                      | `ref‚éïNV -2 9                                                                                                   |
| <span id="‚àÜSIGNAL">[‚àÜSIGNAL](‚àÜsignal.aplf)</span>                     | `‚éïSIGNAL` | üîµ    | Allows `‚éïDMX`-style ref argument                                                                                                                                                                                                      | `‚éïSIGNAL ‚éïDMX`                                                                                                 |

\*‚ÄÉüî∫ new feature‚ÄÉüî∂ added valence‚ÄÉüîµ expanded domain‚ÄÉ‚ö† breaking change‚ÄÉ‚úÖ scheduled for 20.0
